// === Mini client REST Supabase (sans CDN) ===
// ⚠️ REMPLACE ces 2 valeurs par celles de TON projet Supabase
const SUPABASE_URL = 'https://TON-PROJET.supabase.co';
const SUPABASE_KEY = 'TON-ANON-KEY';

const BASE = `${SUPABASE_URL}/rest/v1`;
const SB_HEADERS = {
  apikey: SUPABASE_KEY,
  Authorization: `Bearer ${SUPABASE_KEY}`,
  'Content-Type': 'application/json',
};

// Insert dans la table `reports`
async function sbInsertReport(payload) {
  const res = await fetch(`${BASE}/reports`, {
    method: 'POST',
    headers: { ...SB_HEADERS, Prefer: 'return=representation' },
    body: JSON.stringify(payload),
  });
  if (!res.ok) {
    let err;
    try { err = await res.json(); } catch { err = { message: await res.text() }; }
    throw new Error(err.message || 'Insertion échouée');
  }
  return res.json();
}

// (on ajoutera lecture/mise à jour/suppression plus tard si besoin)
